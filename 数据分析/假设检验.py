"""二项分布的假设检验。
超过 30% 的美国家庭可以上网（显著性水平为 5%）。
我收集了 150 个家庭的样本，发现其中 57 个家庭可以上网。
请问是否有足够证据支持这一说法？
原假设（H₀）：p ≤ 0.30（即不到30%的美国家庭可以上网）
备择假设（H₁）：p > 0.30（即超过30%的美国家庭可以上网）
"""

from scipy.stats import norm

# 样本数据
n = 150  # 样本量
x = 57   # 成功次数
p0 = 0.30  # 原假设比例

# 计算样本比例
p_hat = x / n

# 计算标准误差
se = (p0 * (1 - p0) / n) ** 0.5

# 计算Z值
z = (p_hat - p0) / se

# 计算p值（单尾检验）
p_value = 1 - norm.cdf(z)  # 因为备择假设是 p > p0

# 输出结果
print(f"Z值: {z:.4f}")
print(f"p值: {p_value:.4f}")

# 判断是否拒绝原假设
alpha = 0.05
if p_value < alpha:
    print("拒绝原假设：超过30%的美国家庭可以上网。")
else:
    print("无法拒绝原假设：没有足够证据支持超过30%的美国家庭可以上网。")
